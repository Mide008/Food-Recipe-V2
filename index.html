<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="Discover recipes from around the world">
    <meta name="theme-color" content="#FF6B35">
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Recipe Finder">
    <link rel="manifest" href="manifest.json">
    
    <title>Recipe Finder - Discover Delicious Recipes</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-enhancements.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-animation">
            <div class="cooking-pot">
                <div class="pot-body"></div>
                <div class="steam"></div>
                <div class="steam steam-2"></div>
                <div class="steam steam-3"></div>
            </div>
            <p class="loading-text">Preparing your kitchen...</p>
        </div>
    </div>

    <div id="app" class="app-container">
        <!-- Smart Navigation Dock -->
        <nav class="smart-dock">
            <button class="dock-item active" data-page="home"><i class="fas fa-home"></i><span>Home</span></button>
            <button class="dock-item" data-page="discover"><i class="fas fa-compass"></i><span>Discover</span></button>
            <button class="dock-item" data-page="saved"><i class="fas fa-heart"></i><span>Saved</span><span class="badge" id="savedBadge">0</span></button>
            <button class="dock-item" data-page="meal-plan"><i class="fas fa-calendar-alt"></i><span>Meal Plan</span></button>
            <button class="dock-item" id="shoppingCartBtn"><i class="fas fa-shopping-cart"></i><span>Cart</span><span class="badge" id="cartBadge">0</span></button>
        </nav>

        <main class="main-content">
            <!-- Home Page -->
            <section id="homePage" class="page active">
                <div class="hero-section">
                    <div class="hero-content">
                        <h1 class="hero-title">
                            <span class="title-main">What's Cooking?</span>
                            <span class="title-sub">Discover Recipes from Around the World</span>
                        </h1>
                        <p class="hero-description">From classic international dishes to authentic African cuisine</p>
                        
                        <div class="search-container">
                            <div class="search-wrapper">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" id="searchInput" class="search-input" placeholder="Search by ingredient, dish name, or cuisine..." autocomplete="off">
                                <button id="voiceSearchBtn" class="voice-btn" title="Voice Search"><i class="fas fa-microphone"></i></button>
                                <button id="visualSearchBtn" class="visual-search-btn" title="Search by Image"><i class="fas fa-camera"></i></button>
                            </div>
                            
                            <!-- Autocomplete Dropdown - NOW OUTSIDE SEARCH WRAPPER -->
                            <div id="autocompleteDropdown" class="autocomplete-dropdown hidden"></div>
                            
                            <!-- Search Filters with Clear Labels -->
                            <div class="filter-section-header">
                                <span class="filter-label">Quick Filters:</span>
                            </div>
                            <div class="search-filters">
                                <button class="filter-chip active" data-filter="all">All Cuisines</button>
                                <button class="filter-chip" data-filter="italian">Italian</button>
                                <button class="filter-chip" data-filter="chinese">Chinese</button>
                                <button class="filter-chip" data-filter="mexican">Mexican</button>
                                <button class="filter-chip" data-filter="african">African</button>
                                <button class="filter-chip" data-filter="indian">Indian</button>
                                <button class="filter-chip" data-filter="french">French</button>
                                <button class="filter-chip" data-filter="thai">Thai</button>
                                <button id="moreFiltersBtn" class="filter-chip more-filters"><i class="fas fa-sliders-h"></i> More</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <button class="action-card" id="randomRecipeBtn"><i class="fas fa-dice"></i><span>Surprise Me</span></button>
                    <button class="action-card" id="trendingBtn"><i class="fas fa-fire"></i><span>Trending</span></button>
                    <button class="action-card" id="quickMealsBtn"><i class="fas fa-clock"></i><span>Quick Meals</span></button>
                    <button class="action-card" id="healthyBtn"><i class="fas fa-leaf"></i><span>Healthy</span></button>
                </div>

                <section class="content-section">
                    <div class="section-header">
                        <h2>Explore by Region</h2>
                        <button class="see-all-btn" id="seeAllRegionsBtn">See All</button>
                    </div>
                    <div class="regional-grid" id="regionalGrid">
                        <div class="region-card" data-region="african">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1604329760661-e71dc83f8f26?w=400&h=300&fit=crop" alt="African">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>African</h3><p>Jollof, Egusi, Suya</p></div>
                        </div>
                        <div class="region-card" data-region="italian">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1595295333158-4742f28fbd85?w=400&h=300&fit=crop" alt="Italian">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Italian</h3><p>Pasta, Pizza, Risotto</p></div>
                        </div>
                        <div class="region-card" data-region="chinese">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1525755662778-989d0524087e?w=400&h=300&fit=crop" alt="Chinese">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Chinese</h3><p>Stir-fry, Dumplings</p></div>
                        </div>
                        <div class="region-card" data-region="mexican">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop" alt="Mexican">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Mexican</h3><p>Tacos, Enchiladas</p></div>
                        </div>
                        <div class="region-card" data-region="indian">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=400&h=300&fit=crop" alt="Indian">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Indian</h3><p>Curry, Biryani, Naan</p></div>
                        </div>
                        <div class="region-card" data-region="french">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1541745537411-b8046dc6d66c?w=400&h=300&fit=crop" alt="French">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>French</h3><p>Croissants, Coq au Vin</p></div>
                        </div>
                        <div class="region-card" data-region="american">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop" alt="American">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>American</h3><p>Burgers, BBQ, Wings</p></div>
                        </div>
                        <div class="region-card" data-region="thai">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1559314809-0d155014e29e?w=400&h=300&fit=crop" alt="Thai">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Thai</h3><p>Pad Thai, Tom Yum</p></div>
                        </div>
                        <div class="region-card" data-region="japanese">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?w=400&h=300&fit=crop" alt="Japanese">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Japanese</h3><p>Sushi, Ramen, Tempura</p></div>
                        </div>
                        <div class="region-card" data-region="greek">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1544025162-d76694265947?w=400&h=300&fit=crop" alt="Greek">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Greek</h3><p>Moussaka, Souvlaki</p></div>
                        </div>
                        <div class="region-card" data-region="spanish">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1534080564583-6be75777b70a?w=400&h=300&fit=crop" alt="Spanish">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Spanish</h3><p>Paella, Tapas</p></div>
                        </div>
                        <div class="region-card" data-region="caribbean">
                            <div class="region-image">
                                <img src="https://images.unsplash.com/photo-1598511757337-fe2cafc31ba0?w=400&h=300&fit=crop" alt="Caribbean">
                                <div class="region-overlay"></div>
                            </div>
                            <div class="region-info"><h3>Caribbean</h3><p>Jerk Chicken, Rice & Peas</p></div>
                        </div>
                    </div>
                </section>

                <section class="content-section">
                    <div class="section-header">
                        <h2>Featured Recipes</h2>
                        <button class="see-all-btn" id="seeAllFeaturedBtn">See All</button>
                    </div>
                    <div id="featuredRecipes" class="recipe-grid"></div>
                </section>

                <section class="content-section challenges-section">
                    <div class="section-header">
                        <h2>üèÜ Weekly Cooking Challenges</h2>
                    </div>
                    <div class="challenges-grid">
                        <div class="challenge-card">
                            <div class="challenge-icon">üç≤</div>
                            <h3>Master a Soup</h3>
                            <p>Cook 3 different soups</p>
                            <div class="challenge-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 33%"></div></div>
                                <span>1/3 Complete</span>
                            </div>
                        </div>
                        <div class="challenge-card">
                            <div class="challenge-icon">üå∂Ô∏è</div>
                            <h3>Spice Explorer</h3>
                            <p>Try 5 different cuisines</p>
                            <div class="challenge-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 60%"></div></div>
                                <span>3/5 Complete</span>
                            </div>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Discover Page -->
            <section id="discoverPage" class="page">
                <div class="page-header">
                    <h1>Discover Recipes</h1>
                    <p>Explore thousands of recipes</p>
                </div>
                <div class="discover-filters">
                    <select id="cuisineFilter" class="filter-select">
                        <option value="">All Cuisines</option>
                        <option value="african">African</option>
                        <option value="american">American</option>
                        <option value="british">British</option>
                        <option value="canadian">Canadian</option>
                        <option value="caribbean">Caribbean</option>
                        <option value="chinese">Chinese</option>
                        <option value="croatian">Croatian</option>
                        <option value="dutch">Dutch</option>
                        <option value="egyptian">Egyptian</option>
                        <option value="filipino">Filipino</option>
                        <option value="french">French</option>
                        <option value="greek">Greek</option>
                        <option value="indian">Indian</option>
                        <option value="irish">Irish</option>
                        <option value="italian">Italian</option>
                        <option value="jamaican">Jamaican</option>
                        <option value="japanese">Japanese</option>
                        <option value="kenyan">Kenyan</option>
                        <option value="malaysian">Malaysian</option>
                        <option value="mexican">Mexican</option>
                        <option value="moroccan">Moroccan</option>
                        <option value="polish">Polish</option>
                        <option value="portuguese">Portuguese</option>
                        <option value="russian">Russian</option>
                        <option value="spanish">Spanish</option>
                        <option value="thai">Thai</option>
                        <option value="tunisian">Tunisian</option>
                        <option value="turkish">Turkish</option>
                        <option value="vietnamese">Vietnamese</option>
                    </select>
                    <select id="categoryFilter" class="filter-select">
                        <option value="">All Categories</option>
                        <option value="beef">Beef</option>
                        <option value="chicken">Chicken</option>
                        <option value="dessert">Dessert</option>
                        <option value="lamb">Lamb</option>
                        <option value="pasta">Pasta</option>
                        <option value="pork">Pork</option>
                        <option value="seafood">Seafood</option>
                        <option value="side">Side</option>
                        <option value="starter">Starter</option>
                        <option value="vegan">Vegan</option>
                        <option value="vegetarian">Vegetarian</option>
                        <option value="breakfast">Breakfast</option>
                    </select>
                    <select id="dietFilter" class="filter-select">
                        <option value="">All Diets</option>
                        <option value="vegetarian">Vegetarian</option>
                        <option value="vegan">Vegan</option>
                        <option value="gluten-free">Gluten Free</option>
                        <option value="halal">Halal</option>
                    </select>
                </div>
                <div id="discoverResults" class="recipe-grid"></div>
            </section>

            <!-- Saved Recipes -->
            <section id="savedPage" class="page">
                <div class="page-header">
                    <h1>Saved Recipes</h1>
                    <p>Your favorite recipes</p>
                </div>
                <div class="saved-filters">
                    <input type="text" id="savedSearchInput" placeholder="Search saved..." class="filter-search">
                    <select id="savedSortFilter" class="filter-select">
                        <option value="recent">Recently Saved</option>
                        <option value="name">Name (A-Z)</option>
                        <option value="cuisine">Cuisine</option>
                    </select>
                </div>
                <div id="savedRecipes" class="recipe-grid"></div>
                <div id="emptySavedState" class="empty-state hidden">
                    <i class="fas fa-heart-broken"></i>
                    <h3>No Saved Recipes</h3>
                    <p>Start exploring!</p>
                    <button class="cta-btn" data-navigate="discover">Discover Recipes</button>
                </div>
            </section>

            <!-- Meal Plan -->
            <section id="mealPlanPage" class="page">
                <div class="page-header">
                    <h1>Meal Planner</h1>
                    <p>Plan your week</p>
                </div>
                <div class="meal-plan-controls">
                    <button id="prevWeekBtn" class="week-nav-btn"><i class="fas fa-chevron-left"></i> Previous</button>
                    <h2 id="currentWeekDisplay" class="week-display"></h2>
                    <button id="nextWeekBtn" class="week-nav-btn">Next <i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="meal-plan-grid" id="mealPlanGrid"></div>
                <div class="meal-plan-actions">
                    <button id="generateShoppingListBtn" class="action-btn primary"><i class="fas fa-shopping-basket"></i> Shopping List</button>
                    <button id="clearWeekBtn" class="action-btn secondary"><i class="fas fa-trash-alt"></i> Clear Week</button>
                </div>
            </section>
        </main>

        <!-- Recipe Drawer -->
        <aside id="recipeDrawer" class="drawer">
            <div class="drawer-overlay" id="drawerOverlay"></div>
            <div class="drawer-content">
                <button class="close-drawer" id="closeDrawerBtn"><i class="fas fa-times"></i></button>
                <div id="recipeDetail" class="recipe-detail"></div>
            </div>
        </aside>

        <!-- Shopping Cart Modal -->
        <div id="shoppingCartModal" class="modal">
            <div class="modal-overlay" data-close-modal="shoppingCartModal"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Shopping List</h2>
                    <button class="close-modal" data-close-modal="shoppingCartModal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div id="shoppingList" class="shopping-list"></div>
                    <div id="emptyCartState" class="empty-state">
                        <i class="fas fa-shopping-basket"></i>
                        <h3>Empty shopping list</h3>
                        <p>Add ingredients from recipes</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="clearCartBtn" class="btn-secondary">Clear All</button>
                    <button id="shareCartBtn" class="btn-primary"><i class="fab fa-whatsapp"></i> Share</button>
                </div>
            </div>
        </div>

        <!-- Advanced Filters Modal -->
        <div id="advancedFiltersModal" class="modal">
            <div class="modal-overlay" data-close-modal="advancedFiltersModal"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Advanced Filters</h2>
                    <button class="close-modal" data-close-modal="advancedFiltersModal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="filter-section">
                        <h3>Dietary Restrictions</h3>
                        <div class="checkbox-group">
                            <label><input type="checkbox" value="vegetarian"> Vegetarian</label>
                            <label><input type="checkbox" value="vegan"> Vegan</label>
                            <label><input type="checkbox" value="gluten-free"> Gluten Free</label>
                            <label><input type="checkbox" value="dairy-free"> Dairy Free</label>
                            <label><input type="checkbox" value="halal"> Halal</label>
                        </div>
                    </div>
                    <div class="filter-section">
                        <h3>Cooking Time</h3>
                        <div class="radio-group">
                            <label><input type="radio" name="time" value="quick"> Under 30 min</label>
                            <label><input type="radio" name="time" value="medium"> 30-60 min</label>
                            <label><input type="radio" name="time" value="long"> Over 60 min</label>
                        </div>
                    </div>
                    <div class="filter-section">
                        <h3>Difficulty</h3>
                        <div class="radio-group">
                            <label><input type="radio" name="difficulty" value="easy"> Easy</label>
                            <label><input type="radio" name="difficulty" value="medium"> Medium</label>
                            <label><input type="radio" name="difficulty" value="hard"> Hard</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="resetFiltersBtn" class="btn-secondary">Reset</button>
                    <button id="applyFiltersBtn" class="btn-primary">Apply</button>
                </div>
            </div>
        </div>

        <!-- Image Upload Modal -->
        <div id="imageUploadModal" class="modal">
            <div class="modal-overlay" data-close-modal="imageUploadModal"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Search by Image</h2>
                    <button class="close-modal" data-close-modal="imageUploadModal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="upload-area" id="imageUploadArea">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag & drop or click to upload</p>
                        <input type="file" id="imageInput" accept="image/*" hidden>
                        <button class="btn-primary" onclick="document.getElementById('imageInput').click()">Choose Image</button>
                    </div>
                    <div id="imagePreview" class="image-preview hidden">
                        <img id="previewImg" alt="Preview">
                        <button id="analyzeImageBtn" class="btn-primary">Find Similar Recipes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meal Plan Selector Modal -->
        <div id="mealPlanSelectorModal" class="modal">
            <div class="modal-overlay" data-close-modal="mealPlanSelectorModal"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Add to Meal Plan</h2>
                    <button class="close-modal" data-close-modal="mealPlanSelectorModal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="meal-plan-selector">
                        <div class="form-group">
                            <label for="mealDate">Select Date:</label>
                            <input type="date" id="mealDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Select Meal Type:</label>
                            <div class="meal-type-buttons">
                                <button class="meal-type-btn" data-meal="breakfast">
                                    <i class="fas fa-coffee"></i>
                                    <span>Breakfast</span>
                                </button>
                                <button class="meal-type-btn" data-meal="lunch">
                                    <i class="fas fa-hamburger"></i>
                                    <span>Lunch</span>
                                </button>
                                <button class="meal-type-btn" data-meal="dinner">
                                    <i class="fas fa-utensils"></i>
                                    <span>Dinner</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" data-close-modal="mealPlanSelectorModal">Cancel</button>
                    <button id="confirmAddToMealPlan" class="btn-primary">Add to Plan</button>
                </div>
            </div>
        </div>

        <div id="toastContainer" class="toast-container"></div>
    </div>

    <!-- Install PWA Prompt -->
    <div id="installPrompt" class="install-prompt hidden">
        <div class="install-content">
            <i class="fas fa-download"></i>
            <div>
                <strong>Install Recipe Finder</strong>
                <p>Quick access and offline support</p>
            </div>
            <button id="installBtn" class="install-btn">Install</button>
            <button id="dismissInstallBtn" class="dismiss-btn">√ó</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
